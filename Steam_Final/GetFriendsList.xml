<?xml version="1.0" encoding="UTF-8"?>
<con:testCase id="378da715-b40c-4992-8e26-f8d82dcc92d1" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="GetFriendsList" searchProperties="true" xmlns:con="http://eviware.com/soapui/config"><con:settings><con:setting id="378da715-b40c-4992-8e26-f8d82dcc92d1fileName">GetFriendsList</con:setting></con:settings><con:savedRecentRuns>1</con:savedRecentRuns><con:testStep type="datasource" name="FlistDSrc" id="80b14c3b-8071-47c0-8378-8921089977f5"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="File"><con:configuration><fileName>C:/Users/RAVITA BHATIA/Desktop/final/steamid.txt</fileName><separator>,</separator><trim>true</trim><charset>Cp1252</charset><quotedValues>false</quotedValues></con:configuration></con:dataSource><con:property>steamid</con:property><con:completeLastOperation>true</con:completeLastOperation><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="restrequest" name="Friendslist" id="d3459a1b-2f91-4583-8693-b42f55fd3ce8"><con:settings/><con:config service="http://api.steampowered.com" resourcePath="/ISteamUser/GetFriendList/v0001/" methodName="V0001 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Friendslist" id="9c195fa5-8820-4af8-ae77-ded1e73374ea" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://api.steampowered.com</con:endpoint><con:request/><con:originalUri>http://api.steampowered.com/ISteamUser/GetFriendList/v0001/</con:originalUri><con:assertion type="Simple Contains" id="2349e9c0-d22f-4e55-afc9-3ffc121d6ab7" name="Contains"><con:configuration><token>"relationship": "friend"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="64204425-d669-4bc0-988f-471a87c5617b" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="steamid" value="${FlistDSrc#steamid}"/>
  <con:entry key="relationship" value="friend"/>
  <con:entry key="key" value="54E82E96A6E43ED09207FCAF2BD5BE2D"/>
</con:parameters><con:parameterOrder><con:entry>key</con:entry><con:entry>steamid</con:entry><con:entry>relationship</con:entry></con:parameterOrder><con:environmentSpec><con:entry environmentId="b99c651a-70f2-4d56-90e3-275d0387157f"><con:authProfile>Inherit From Parent</con:authProfile></con:entry></con:environmentSpec></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="GetSteamIDs" id="3efe07c8-6113-4f7d-94c3-ab6f9d86f950"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Friendslist</con:sourceStep><con:sourcePath>$.friendslist.friends[0].steamid</con:sourcePath><con:targetType>PlayerID</con:targetType><con:targetStep>#TestSuite#</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="PlayerList" id="79058e73-cb09-414a-ae13-ef4bb60e2156" disabled="true"><con:settings/><con:config><script>def a =testRunner.testCase.testSuite.getPropertyValue("FriendsList")
def b =  a[1..a.length()-2].tokenize(', ')
int arraySize = b.size()
log.info arraySize
for(int i =0; i &lt; arraySize;  i++)
{
testRunner.testCase.testSuite.setPropertyValue("PlayerID", b[i])
log.info b[i] 
testRunner.runTestStepByName("OwnedGames")
testRunner.runTestStepByName("GetAppID")
testRunner.runTestStepByName("AchivementsLoop")
testRunner.runTestStepByName("DataSink")
}
//testRunner.cancel()</script></con:config></con:testStep><con:testStep type="restrequest" name="OwnedGames" id="e4531b48-40df-4af7-bd4b-260ed02a30da"><con:settings/><con:config service="http://api.steampowered.com" resourcePath="/IPlayerService/GetOwnedGames/v0001/" methodName="V0001 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="OwnedGames" id="887b88e0-31cc-426c-81d0-e624ee69b33f" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://api.steampowered.com</con:endpoint><con:request/><con:originalUri>http://api.steampowered.com/IPlayerService/GetOwnedGames/v0001/</con:originalUri><con:assertion type="Simple Contains" id="f9b80ea3-b891-4539-a783-737d0ca97fad" name="Contains"><con:configuration><token>"playtime_forever"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="f50c8ab1-8c2a-4dc1-8f1c-f8b8850e8f2a" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="steamid" value="${#TestSuite#PlayerID}"/>
  <con:entry key="format" value="json"/>
  <con:entry key="key" value="54E82E96A6E43ED09207FCAF2BD5BE2D"/>
</con:parameters><con:parameterOrder><con:entry>key</con:entry><con:entry>format</con:entry><con:entry>steamid</con:entry></con:parameterOrder><con:environmentSpec><con:entry environmentId="b99c651a-70f2-4d56-90e3-275d0387157f"><con:authProfile>Inherit From Parent</con:authProfile></con:entry></con:environmentSpec></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="GetAppID" id="9e50f81b-5be7-4a1b-8260-0e2614a46376"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>A_ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>OwnedGames</con:sourceStep><con:sourcePath>$.response.games.[*].appid</con:sourcePath><con:targetType>GameID</con:targetType><con:targetStep>#TestSuite#</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" entitize="false" ignoreEmpty="false" transferChildNodes="false"><con:name>appid</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>OwnedGames</con:sourceStep><con:sourcePath>$['response']['games'][*]['appid']</con:sourcePath><con:targetType>sink3</con:targetType><con:targetStep>DataSink</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="datasink" name="DataSink" id="5b0618c3-44e2-49fd-b178-f7d69334f0c9"><con:settings/><con:config xsi:type="con:DataSinkStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSink type="File"><con:configuration><fileName>C:/Users/RAVITA BHATIA/Desktop/final/output.txt</fileName><separator>,</separator><escape>"</escape><quote>true</quote><trim>true</trim><append>false</append><encoding>Cp1252</encoding></con:configuration></con:dataSink><con:properties><con:property><con:name>sink3</con:name><con:value>[51100, 271290, 253710, 242920, 252290, 222880, 224600, 227940, 318100, 327680, 298110, 255710, 362180, 382850, 397980, 412130, 225540, 359550, 391220, 310380, 467090, 223100, 477980, 491170, 273350, 518100, 444560, 534110, 537420, 537421, 537422]</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="AchivementsLoop" id="cbcb8f12-1c06-4be0-80c4-b112864c586c"><con:settings/><con:config><script>def cl = testRunner.testCase.testSuite.getPropertyValue("GameID")
def ct = cl[1..cl.length()-2].tokenize(', ')
def arraySize1 = ct.size()
log.info ct
for(ak = 0;ak&lt;arraySize1;ak++)
{
testRunner.testCase.testSuite.setPropertyValue("GameID_2", ct[ak])
log.info ct[ak]
testRunner.runTestStepByName("GetAchivements")
}
testRunner.runTestStepByName("DataSourceLoop")</script></con:config></con:testStep><con:testStep type="restrequest" name="GetAchivements" id="7e8687a2-8e63-4072-9c0a-fcb1cb02dc9e"><con:settings/><con:config service="http://api.steampowered.com" resourcePath="/ISteamUserStats/GetPlayerAchievements/v0001/" methodName="V0001 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="GetAchivements" id="f88daedf-9463-4259-b5b3-6d319f2cae3d" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://api.steampowered.com</con:endpoint><con:request/><con:originalUri>http://api.steampowered.com/ISteamUserStats/GetPlayerAchievements/v0001/</con:originalUri><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="steamid" value="${#TestSuite#PlayerID}"/>
  <con:entry key="appid" value="440"/>
  <con:entry key="key" value="54E82E96A6E43ED09207FCAF2BD5BE2D"/>
</con:parameters><con:parameterOrder><con:entry>key</con:entry><con:entry>steamid</con:entry><con:entry>appid</con:entry></con:parameterOrder><con:environmentSpec><con:entry environmentId="b99c651a-70f2-4d56-90e3-275d0387157f"><con:authProfile>Inherit From Parent</con:authProfile></con:entry></con:environmentSpec></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Copy of Friendslist" id="42582206-d898-4be1-9c2a-ab1b2961a2e0" disabled="true"><con:settings/><con:config service="http://api.steampowered.com" resourcePath="/ISteamUser/GetFriendList/v0001/" methodName="V0001 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Copy of Friendslist" id="9c195fa5-8820-4af8-ae77-ded1e73374ea" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://api.steampowered.com</con:endpoint><con:request/><con:originalUri>http://api.steampowered.com/ISteamUser/GetFriendList/v0001/</con:originalUri><con:assertion type="Simple Contains" id="2349e9c0-d22f-4e55-afc9-3ffc121d6ab7" name="Contains"><con:configuration><token>"relationship": "friend"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="64204425-d669-4bc0-988f-471a87c5617b" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="steamid" value="${FlistDSrc#steamid}"/>
  <con:entry key="relationship" value="friend"/>
  <con:entry key="key" value="54E82E96A6E43ED09207FCAF2BD5BE2D"/>
</con:parameters><con:parameterOrder><con:entry>key</con:entry><con:entry>steamid</con:entry><con:entry>relationship</con:entry></con:parameterOrder><con:environmentSpec><con:entry environmentId="b99c651a-70f2-4d56-90e3-275d0387157f"><con:authProfile>Inherit From Parent</con:authProfile></con:entry></con:environmentSpec></con:restRequest></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop" id="fe8b4803-d9d4-48d2-af60-c5fadb96f51c"><con:settings/><con:config><dataSourceStep>FlistDSrc</dataSourceStep><targetStep>Friendslist</targetStep></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>79058e73-cb09-414a-ae13-ef4bb60e2156</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9e50f81b-5be7-4a1b-8260-0e2614a46376</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cbcb8f12-1c06-4be0-80c4-b112864c586c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5b0618c3-44e2-49fd-b178-f7d69334f0c9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>fe8b4803-d9d4-48d2-af60-c5fadb96f51c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>80b14c3b-8071-47c0-8378-8921089977f5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7e8687a2-8e63-4072-9c0a-fcb1cb02dc9e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:environmentSpec><con:entry environmentId="b99c651a-70f2-4d56-90e3-275d0387157f"><con:authProfile>Inherit From Parent</con:authProfile></con:entry></con:environmentSpec></con:testCase>